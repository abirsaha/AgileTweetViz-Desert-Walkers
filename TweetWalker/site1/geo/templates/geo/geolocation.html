{% extends "base.html" %}
{% load i18n %}
{% block content %}
<script>
    // log function
    log = function(data){
        $("div#terminal").prepend("</br>" +data);
    };

    $(document).ready(function () {
        var ws;

        var host = 'localhost';
        var port = '8888';
        var uri = '/ws';

        // create websocket instance
        ws = new WebSocket("ws://" + host + ":" + port + uri);

        // Handle incoming websocket message callback
        ws.onmessage = function (evt) {
            log("Message Received: " + evt.data)
            alert("message received: " + evt.data);
        };

        // Close Websocket callback
        ws.onclose = function (evt) {
            log("***Connection Closed***");
            alert("Connection close");
        };

        // Open Websocket callback
        ws.onopen = function (evt) {
            log("***Connection Opened***");
        };

        // Send websocket message function
        $("#send").click(function (evt) {
            log("Sending Message: Hello");
            ws.send("Hello");
        });
    });
</script>
<div id="terminal">

</div>
<input type="submit" id="send" value="send" />
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <h2>TweetWalker</h2>
        </div>
    </div>
</nav>

<div id="geolocation" class="container" style="width:100%;">
    <script type='text/javascript'>
        var back = "{{form|escapejs}}";
        window.data = back
    </script>
    {%verbatim%}
    <div class="col-md-12" id = "geo">
        <h3>World Map Visualization</h3>
        <div geo-chart></div>
    </div>
    {%endverbatim%}
</div>
{% endblock content %}
